<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>you're dog shit</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.11.3/brython.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.9.5/brython_stdlib.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython-matplotlib@0.1.0/brython_matplotlib.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>操，你個沒媽的東西</h1>
    <div style="justify-content: center">
        <div id="timeDisplay"></div>
        <div id="ElapsedtimeDisplay"></div>
    </div>
    <button id="press">平平無奇的按鈕</button>
    <div id="container">
        <div id="videoContainer">
            <video autoplay loop muted id="CaoNiMaVideo">
              <source src="videos/操你媽.mp4" type="video/mp4">
              您的瀏覽器不支援影片播放。
            </video>
        </div>
    </div>
    <a href="images/downs_tai_watching_furry.png" target="_blank" style="color: rgb(0, 0, 0); text-decoration: underline; font-size: 18px;">
        唐苔喜歡福瑞
    </a>
    <h2>狗屎考拉茲猜想</h2>
    <input type="number" id="collatz_number_input" placeholder="輸入一個數字">
    <button id="Collatz">計算</button>

    <div id="collatz_result" style="margin-top: 20px; padding: 10px; border: 1px solid black;">
        <p style="color: white"><strong>計算結果：</strong></p>
        <p id="sequence" style="color: white"></p>
        <p id="steps" style="color: white"></p>
    </div>
    
    <h3>狗屎相關係數</h3>
    <label style="color: white" for="x_input">請輸入 X 數據 (用空格分隔):</label>
    <input type="text" id="x_input">
    <br>

    <label style="color: white" for="y_input">請輸入 Y 數據 (用空格分隔):</label>
    <input type="text" id="y_input">
    <br>

    <button id="calculate">計算標準化與相關係數</button>

    <div id="result" style="margin-top: 20px;">
        <p id="correlation_result"></p>
        <canvas id="plot_canvas"></canvas>
    </div>
   
    <script type="text/python">
from browser import document
import numpy as np
import matplotlib.pyplot as plt
from io import BytesIO
import base64

def generate_plot(event):
    x_values = document["x_input"].value.split()
    y_values = document["y_input"].value.split()

    try:
        x_sequence = np.array(list(map(float, x_values)))
        y_sequence = np.array(list(map(float, y_values)))
    except ValueError:
        document["error_message"].text = "請輸入正確的數據格式"
        return

    x_mean, y_mean = np.mean(x_sequence), np.mean(y_sequence)
    x_std, y_std = np.std(x_sequence), np.std(y_sequence)
    x_stdized = (x_sequence - x_mean) / x_std
    y_stdized = (y_sequence - y_mean) / y_std

    fig, axes = plt.subplots(1, 2, figsize=(10, 5))

    axes[0].scatter(x_sequence, y_sequence, color='blue', label='原始數據')
    axes[1].scatter(x_stdized, y_stdized, color='red', label='標準化後')

    for ax in axes:
        ax.axhline(0, color='gray', linestyle='--', linewidth=0.8)
        ax.axvline(0, color='gray', linestyle='--', linewidth=0.8)
        ax.legend()
        ax.set_aspect('equal')

    plt.tight_layout()

    buf = BytesIO()
    plt.savefig(buf, format="png")
    buf.seek(0)
    img_base64 = base64.b64encode(buf.read()).decode("utf-8")

    document["plot_image"].attrs["src"] = f"data:image/png;base64,{img_base64}"
    document["error_message"].text = ""

document["plot_button"].bind("click", generate_plot)
</script>


    <script src="script.js"></script>
    </body>
</html>
